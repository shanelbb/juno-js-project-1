<!DOCTYPE html>
<html lang="en">
​
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=`, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link href="https://fonts.googleapis.com/css?family=Barlow&display=swap" rel="stylesheet" />
  <!-- <link rel="stylesheet" href="./styles.css" /> -->
  <title>Proof of Concept</title>
  <style>
    .hidden {
      visibility: hidden;
    }
  </style>
</head>
​
<body>
  <div class="wrapper">
    <header>
      <h1>Test</h1>
    </header>
    <section class="game">
      <form class="content" action="">
        <!-- DYNAMIC FIELDSETS GOES HERE -->
      </form>
    </section>
​
    <div class="score-board">
      <!-- SHOW SCORE -->
    </div>
    <!-- Import jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
​
    <script>
      $(function () {
        const quizData = {
          quiz: [
            {
            name: "question1",
            question: "what is the answer?",
            answers: [
              {
                value: "Harry Potter",
              },
              {
                value: "Dumbledore",
              },
              {
                value: "Hermione"
              },
              {
                value: "Ron",
              },
            ],
            correct: 1
          },
          {
            name: "question2",
            question: "This is the second question",
            answers: [
              {
                value: "Gryffindor"
              },
              {
                value: "Ravenclaw"
              },
              {
                value: "Hufflepuff"
              },
              {
                value: "Slytherin"
              },
            ],
            correct: 3
          },
          {
            name: "question3",
            question: "This is the third question",
            answers: [
              {
                value: "one"
              },
              {
                value: "two"
              },
              {
                value: "three"
              },
              {
                value: "four"
              },
            ],
            correct: 2
          },
          ],
          score: 0,
        }
    
        let correctArray = quizData.quiz.map(function (question) {
          return question.correct;
        })
        const formSubmit = function (i) {
          $("form").on("click", "button", function (e) {
            e.preventDefault();  
            const userChoice = $(this).prev().children("input[type='radio']:checked").val();
            const userChoiceNumber = parseInt(userChoice);
            const fieldSetID = $(this).prev().attr("id");
            const correctAnswer = quizData.quiz[fieldSetID].correct;
            if(userChoiceNumber === correctAnswer){
              quizData.score++
              showScore()
            } else {
              quizData.score--
              showScore()
            }
            $(this).hide();
            $(this).prev().hide();
            showNextQuestion(parseInt(fieldSetID));
          })
        }
        const showNextQuestion = (index) => {
          if(index === quizData.quiz.length - 1){
            showFinalScreen();
          }else {
            showQuestion(index + 1);
          }
        }
        const showScore = function (score) {
          console.log(quizData.score)
          $(".score-board").html(`<p>Score: ${quizData.score * 10} </p>`)
        }
        const showQuestion = function (i) {
          const htmlToAppend = `
              <fieldset id=${i}>
                <legend>${quizData.quiz[i].question}</legend>
                <label for="answer1">${quizData.quiz[i].answers[0].value}</label>
                <input value="0" checked type="radio" name=${quizData.quiz[i].name} id="answer1"/>
                <label for="answer2">${quizData.quiz[i].answers[1].value}</label>
                <input  value="1" type="radio" name=${quizData.quiz[i].name} id="answer1"/>
                <label for="answer3">${quizData.quiz[i].answers[2].value}</label>
                <input  value="2" type="radio" name=${quizData.quiz[i].name} id="answer1"/>
                <label for="answer4">${quizData.quiz[i].answers[3].value}</label>
                <input  value="3" type="radio" name=${quizData.quiz[i].name} id="answer1"/>
              </fieldset>
              <button id="next">next</button>
            `
          $(".content").append(htmlToAppend);
        }
        const showFinalScreen = () => {
          const htmlToAppend = `
          <h2>This is the final screen</h2>
          `
          $(".content").html(htmlToAppend )
        }
        const init = function(){
          showQuestion(0)
          formSubmit();
          showScore();
        }
        
        init();
        
      })
    </script>
</body>
​
</html>