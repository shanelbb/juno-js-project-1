<!DOCTYPE html>
<html lang="en">
​
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=`, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link href="https://fonts.googleapis.com/css?family=Barlow&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./styles.css" />
  <title>Proof of Concept</title>
</head>
​
<body>
  <div class="wrapper">
    <header>
      <h1>Test</h1>
    </header>
    <section class="game">
      <form class="content" action="">
        <!-- DYNAMIC FIELDSETS GOES HERE -->
        <button type="submit" id="submit">Submit</button>
      </form>
    </section>
​
    <div class="score-board">
      <!-- SHOW SCORE -->
    </div>
    <!-- Import jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
​
    <script>
      $(function () {
        const quiz = [
          {
            name: "question1",
            question: "what is the answer?",
            answers: [
              {
                value: "Harry Potter",
              },
              {
                value: "Dumbledore",
              },
              {
                value: "Hermione",
​
              },
              {
                value: "Ron",
              },
            ],
            correct: 1
          },
          {
            name: "question2",
            question: "This is the second question",
            answers: [
              {
                value: "Gryffindor",
              },
              {
                value: "Ravenclaw",
              },
              {
                value: "Hufflepuff",
​
              },
              {
                value: "Slytherin",
              },
            ],
            correct: 3
          },
          {
            name: "question3",
            question: "This is the second question",
            answers: [
              {
                value: "one",
              },
              {
                value: "two",
              },
              {
                value: "three",
​
              },
              {
                value: "four",
              },
            ],
            correct: 2
          },
        ]
​
        const createForm = function () {
          quiz.forEach(function (question) {
            const htmlToAppend = `
              <fieldset>
                <legend>${question.question}</legend>
                <label for="answer1">${question.answers[0].value}</label>
                <input value="0" checked type="radio" name=${question.name} id="answer1"/>
                <label for="answer2">${question.answers[1].value}</label>
                <input  value="1" type="radio" name=${question.name} id="answer1"/>
                <label for="answer3">${question.answers[2].value}</label>
                <input  value="2" type="radio" name=${question.name} id="answer1"/>
                <label for="answer4">${question.answers[3].value}</label>
                <input  value="3" type="radio" name=${question.name} id="answer1"/>
              </fieldset>
            `
            $(htmlToAppend).insertBefore("#submit");
          })
        }
​
        createForm();
​
        // array of correct answers
        let correctArray = quiz.map(function (question) {
          return question.correct;
        })
​
        // Function to check if the values in the submitted answer are correct or not
        const checkValues = function (array) {
          let correctArray = [];
          let incorrectArray = [];
          let score = 0;
          array.forEach(function (answer, i) {
            answerNumber = parseInt(answer)
            if (answerNumber === quiz[i].correct) {
              correctArray.push(answer);
            } else {
              incorrectArray.push(answer)
            }
          })
          score = score + correctArray.length * 10;
          showScore(score);
        }
​
        const formSubmit = function () {
          // let score = 0;
          $("form").on("submit", function (e) {
            e.preventDefault();
            console.log("submitted")
            // Store all the values of the selected questions in an "array-like-object"
            const answers = $("input[type='radio']:checked").map(function () {
              return $(this).val();
            })
            // the answers are stored in a jQuery object so we make an array to loop through
            const answersArray = Array.from(answers);
            // call the function that submits all the answers
            checkValues(answersArray);
          })
        }
​
        const showScore = function (score) {
          $(".score-board").append(`<p>Score: ${score} </p>`)
        }
        formSubmit();
      })
    </script>
</body>
​
</html>